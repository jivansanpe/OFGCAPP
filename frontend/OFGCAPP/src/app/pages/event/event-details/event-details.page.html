<app-menu *ngIf="isLoggedIn"></app-menu>

<div class="ion-page" id="main-content">
  <app-header></app-header>
  <ion-content *ngIf="event" class="ion-padding">
    <app-top-part title='{{event.name}}'></app-top-part>
    <div>
      <ion-img class="img-div" src="http://localhost:8000/storage/{{event.image}}"></ion-img>
    </div>
    <ion-list class="list">
      <ion-item>
        <ion-label class="subtext" (click)="goToMusician(event.musician.id)">{{event.musician.name}}</ion-label>
      </ion-item>
      <ion-item>
        <ion-label class="subtext">{{event.category}}</ion-label>
      </ion-item>
      <ion-item>
        <ion-label class="subtext">{{event.date}}</ion-label>
      </ion-item>
    </ion-list>
    <ion-button href={{event.link}} target="blank">Comprar entradas</ion-button>
    <div class="subtitle-div">
      <ion-title>Solistas</ion-title>
    </div>
    <div class="text-div">
      <ion-textarea>
        {{event.description}}
      </ion-textarea>
    </div>
    <!-- <div class="subtitle-div">
      <ion-title>MÃºsicos</ion-title>
    </div>
    <ion-card *ngFor="let e of event.musicians" (click)="goToMusician(e.id)">
      <img alt="Silhouette of mountains" src="http://localhost:8000/storage/{{e.image}}" />
      <ion-card-header>
        <ion-card-title>{{e.name}}</ion-card-title>
        <ion-card-subtitle>{{e.pivot.category}}</ion-card-subtitle>
      </ion-card-header>
    </ion-card> -->
    <div class="subtitle-div-pieces">
      <ion-title>Obras <span *ngIf="isLoggedIn" (click)="createPiece()">+</span></ion-title>
    </div>

    <div class="piece-list">
      <ion-list>
        <ion-item *ngFor="let piece of matchingPieceIds">
          {{ piece.name }}
          <div class="accordion-info ion-padding" (click)="goToAuthor(piece.author_id)" slot="end">
            <ion-button>Ir al autor</ion-button>
          </div>
        </ion-item>
      </ion-list>
    </div>
    

    
    <!-- <ion-accordion-group class="ion-padding">
      <ion-accordion *ngFor="let p of event.pieces">
        <ion-item slot="header">
          <ion-label>{{p.name}}</ion-label>
        </ion-item>
        <div class="accordion-info ion-padding" slot="content">
          {{p.description}}
        </div>
        <div class="accordion-info ion-padding" (click)="goToAuthor(p.author.id)" slot="content">
          <ion-button>Ir al autor</ion-button>
        </div>
      </ion-accordion>
    </ion-accordion-group> -->
  </ion-content>
</div>