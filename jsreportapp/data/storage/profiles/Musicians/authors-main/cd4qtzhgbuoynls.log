{"type":"operationStart","subtype":"profile","data":{"_id":"Ue2qqx5NnJXCyTEW","timestamp":"2023-02-21T22:36:48.208Z","state":"queued","mode":"standard","creationDate":"2023-02-21T22:36:48.210Z","modificationDate":"2023-02-21T22:36:48.210Z","shortid":"KEm8pCE","$entitySet":"profiles"},"doDiffs":false,"timestamp":1677019008209,"id":"gb2eriwshnagxa9","previousOperationId":null,"operationId":"onp6x1b0wr4bfg2"}
{"type":"log","level":"info","message":"Render request 5 queued for execution and waiting for available worker","previousOperationId":"onp6x1b0wr4bfg2","timestamp":1677019008209,"id":"mekknic6c0w5arm"}
{"type":"operationStart","subtype":"render","name":"authors-main","previousOperationId":"onp6x1b0wr4bfg2","timestamp":1677019008221,"id":"ri1isjaeg3wh5g4","previousEventId":"gb2eriwshnagxa9","operationId":"21u5w7z0yd29u6r"}
{"type":"log","timestamp":1677019008221,"level":"info","message":"Starting rendering request 5","meta":{"rootId":"cd4qtzhgbuoynls","id":"cd4qtzhgbuoynls"},"id":"9o70yo4a1xvdful","previousOperationId":"21u5w7z0yd29u6r"}
{"type":"log","timestamp":1677019008221,"level":"info","message":"Rendering template { name: authors-main, recipe: chrome-pdf, engine: handlebars, preview: true }","meta":{"rootId":"cd4qtzhgbuoynls","id":"cd4qtzhgbuoynls"},"id":"wtbtuo5a6hcbmy5","previousOperationId":"21u5w7z0yd29u6r"}
{"type":"log","timestamp":1677019008221,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"cd4qtzhgbuoynls","id":"cd4qtzhgbuoynls"},"id":"mhy8ozqq2yp38in","previousOperationId":"21u5w7z0yd29u6r"}
{"type":"log","timestamp":1677019008223,"level":"debug","message":"Executing script authors-script (beforeRender)","meta":{"rootId":"cd4qtzhgbuoynls","id":"cd4qtzhgbuoynls"},"id":"dy5vgsciplxse46","previousOperationId":"21u5w7z0yd29u6r"}
{"type":"operationStart","subtype":"scriptsBeforeRender","name":"scripts beforeRender","timestamp":1677019008257,"id":"gf3syk1mbrdbxii","previousEventId":"ri1isjaeg3wh5g4","operationId":"uaq29w1anquu43t","previousOperationId":"21u5w7z0yd29u6r"}
{"type":"operationStart","subtype":"script","name":"scripts authors-script","previousOperationId":"uaq29w1anquu43t","timestamp":1677019008257,"id":"2y90fhw3bra5qvh","previousEventId":"gf3syk1mbrdbxii","operationId":"f72fq0phi01yqto"}
{"type":"log","timestamp":1677019008488,"level":"warn","message":"Error when processing render request 5\n(because) error when evaluating custom script /Musicians/authors-script\nforEach is not defined\n\n(sandbox.js line 16:9)\n\n  14 |         count = 0;\n  15 |         musician['count']= musician['events'].length;\n> 16 |         musician-forEach(event =>{\n     |         ^\n  17 |             if(event['pivot'].special == \"Si\"){\n  18 |                 count += 1;\n  19 |             }\n\n(sandbox.js line 13:29)\n\n  11 |      counts = [];\n  12 |      special_count = [];\n> 13 |      resMusicians.data.data.forEach(musician => {\n     |                             ^\n  14 |         count = 0;\n  15 |         musician['count']= musician['events'].length;\n  16 |         musician-forEach(event =>{\n\n\nReferenceError: forEach is not defined\n    at sandbox.js:16:9\n    at Array.forEach (<anonymous>)\n    at Object.beforeRender (sandbox.js:13:29)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at async executionFn (D:\\Clase\\Segundo\\Proyecto\\OFGCAPP\\jsreportapp\\node_modules\\@jsreport\\jsreport-scripts\\lib\\executeScript.js:67:11)\n    at async run (D:\\Clase\\Segundo\\Proyecto\\OFGCAPP\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:184:24)\n    at async WorkerReporter._runInSandbox (D:\\Clase\\Segundo\\Proyecto\\OFGCAPP\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:180:14)\n    at async executeScript (D:\\Clase\\Segundo\\Proyecto\\OFGCAPP\\jsreportapp\\node_modules\\@jsreport\\jsreport-scripts\\lib\\executeScript.js:122:12)\n    at async Scripts._runScript (D:\\Clase\\Segundo\\Proyecto\\OFGCAPP\\jsreportapp\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:140:30)\n    at async Scripts.handleBeforeRender (D:\\Clase\\Segundo\\Proyecto\\OFGCAPP\\jsreportapp\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:64:7)","meta":{"rootId":"cd4qtzhgbuoynls","id":"cd4qtzhgbuoynls"},"id":"g1ujy350g9kbu0r","previousOperationId":"f72fq0phi01yqto"}
{"type":"log","timestamp":1677019008488,"level":"warn","message":"Rendering request 5 finished with error in 281 ms","meta":{"rootId":"cd4qtzhgbuoynls","id":"cd4qtzhgbuoynls"},"id":"qcm2xy74l8nupha","previousOperationId":"f72fq0phi01yqto"}
{"type":"error","timestamp":1677019008495,"statusCode":400,"weak":true,"lineNumber":16,"decoratedSuffix":"\n\n(sandbox.js line 16:9)\n\n  14 |         count = 0;\n  15 |         musician['count']= musician['events'].length;\n> 16 |         musician-forEach(event =>{\n     |         ^\n  17 |             if(event['pivot'].special == \"Si\"){\n  18 |                 count += 1;\n  19 |             }\n\n(sandbox.js line 13:29)\n\n  11 |      counts = [];\n  12 |      special_count = [];\n> 13 |      resMusicians.data.data.forEach(musician => {\n     |                             ^\n  14 |         count = 0;\n  15 |         musician['count']= musician['events'].length;\n  16 |         musician-forEach(event =>{\n\n","entity":{"shortid":"LzD1Qor","name":"authors-script","content":"// server side script fetching remote data and preparing report data source\r\nconst axios = require('axios');\r\n\r\n\r\n// add jsreport hook which modifies the report input data\r\nasync function beforeRender(req, res) {\r\n    const resMusicians = await axios.get('http://localhost:8000/api/musicians')\r\n    req.data.musicians = [];\r\n     req.data.musicians.push(resMusicians.data.data);\r\n     names = [];\r\n     counts = [];\r\n     special_count = [];\r\n     resMusicians.data.data.forEach(musician => {\r\n        count = 0;\r\n        musician['count']= musician['events'].length;\r\n        musician-forEach(event =>{\r\n            if(event['pivot'].special == \"Si\"){\r\n                count += 1;\r\n            }\r\n        })\r\n        names.push(author.name);\r\n        counts.push(author.count);\r\n        special_count.push(count);\r\n        });\r\n    req.data.musicians.push(names);\r\n    req.data.musicians.push(counts);\r\n    req.data.musicians.push(special_count);\r\n    console.log(counts);\r\n    return req.data.musicians;\r\n}"},"property":"content","logged":true,"previousOperationId":"f72fq0phi01yqto","id":"56p3kge91nrj4o0","stack":"ReferenceError: forEach is not defined\n    at sandbox.js:16:9\n    at Array.forEach (<anonymous>)\n    at Object.beforeRender (sandbox.js:13:29)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at async executionFn (D:\\Clase\\Segundo\\Proyecto\\OFGCAPP\\jsreportapp\\node_modules\\@jsreport\\jsreport-scripts\\lib\\executeScript.js:67:11)\n    at async run (D:\\Clase\\Segundo\\Proyecto\\OFGCAPP\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:184:24)\n    at async WorkerReporter._runInSandbox (D:\\Clase\\Segundo\\Proyecto\\OFGCAPP\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:180:14)\n    at async executeScript (D:\\Clase\\Segundo\\Proyecto\\OFGCAPP\\jsreportapp\\node_modules\\@jsreport\\jsreport-scripts\\lib\\executeScript.js:122:12)\n    at async Scripts._runScript (D:\\Clase\\Segundo\\Proyecto\\OFGCAPP\\jsreportapp\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:140:30)\n    at async Scripts.handleBeforeRender (D:\\Clase\\Segundo\\Proyecto\\OFGCAPP\\jsreportapp\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:64:7)","message":"Error when evaluating custom script /Musicians/authors-script\nforEach is not defined\n\n(sandbox.js line 16:9)\n\n  14 |         count = 0;\n  15 |         musician['count']= musician['events'].length;\n> 16 |         musician-forEach(event =>{\n     |         ^\n  17 |             if(event['pivot'].special == \"Si\"){\n  18 |                 count += 1;\n  19 |             }\n\n(sandbox.js line 13:29)\n\n  11 |      counts = [];\n  12 |      special_count = [];\n> 13 |      resMusicians.data.data.forEach(musician => {\n     |                             ^\n  14 |         count = 0;\n  15 |         musician['count']= musician['events'].length;\n  16 |         musician-forEach(event =>{\n\n"}
